<html><head></head><body><div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a href="https://github.com/nfriedly/express-rate-limit">express-rate-limit (v2.6.0)</a>
</h1>
<h4>Basic IP rate-limiting middleware for Express. Use to limit repeated requests to public APIs and/or endpoints such as password reset.</h4>
<div class="apidocSectionDiv"><a href="#apidoc.tableOfContents" id="apidoc.tableOfContents"><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.express-rate-limit">module express-rate-limit</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express-rate-limit.express-rate-limit">
            function <span class="apidocSignatureSpan"></span>express-rate-limit
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.express-rate-limit" id="apidoc.module.express-rate-limit">module express-rate-limit</a></h1>


    <h2>
        <a href="#apidoc.element.express-rate-limit.express-rate-limit" id="apidoc.element.express-rate-limit.express-rate-limit">
        function <span class="apidocSignatureSpan"></span>express-rate-limit
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function RateLimit(options) {

    options = defaults(options, {
        // window, delay, and max apply per-key unless global is set to true
        windowMs: 60 * 1000, // milliseconds - how long to keep records of requests in memory
        delayAfter: 1, // how many requests to allow through before starting to delay responses
        delayMs: 1000, // milliseconds - base delay applied to the response - multiplied by number of recent hits for the same key
.
        max: 5, // max number of recent connections during `window` milliseconds before sending a 429 response
        message : 'Too many requests, please try again later.',
        statusCode: 429, // 429 status = Too Many Requests (RFC 6585)
        headers: true, //Send custom rate limit header with limit and remaining
        // allows to create custom keys (by default user IP is used)
        keyGenerator: function (req /*, res*/) {
            return req.ip;
        },
        skip: function (/*req, res*/) {
            return false;
        },
        handler: function (req, res /*, next*/) {
          res.format({
            html: function(){
              res.status(options.statusCode).end(options.message);
            },
            json: function(){
              res.status(options.statusCode).json({ message: options.message });
            }
          });
        }
    });

    // store to use for persisting rate limit data
    options.store = options.store || new MemoryStore(options.windowMs);


    // ensure that the store has the incr method
    if (typeof options.store.incr !== 'function' || typeof options.store.resetKey !== 'function') {
        throw new Error('The store is not valid.');
    }


    if (options.global) {
        throw new Error('The global option was removed from express-rate-limit v2.');
    }


    function rateLimit(req, res, next) {
        if (options.skip(req, res)) {
            return next();
        }

        var key = options.keyGenerator(req, res);

        options.store.incr(key, function(err, current) {
            if (err) {
              return next(err);
            }

            req.rateLimit = {
              limit: options.max,
              remaining: Math.max(options.max - current, 0)
            };

            if (options.headers) {
              res.setHeader('X-RateLimit-Limit', options.max);
              res.setHeader('X-RateLimit-Remaining', req.rateLimit.remaining);
            }

            if (options.max &amp;&amp; current &gt; options.max) {
              return options.handler(req, res, next);
            }

            if (options.delayAfter &amp;&amp; options.delayMs &amp;&amp; current &gt; options.delayAfter) {
              var delay = (current - options.delayAfter) * options.delayMs;
              return setTimeout(next, delay);
            }

            next();

        });
    }

    rateLimit.resetKey = options.store.resetKey.bind(options.store);

    // Backward compatibility function
    rateLimit.resetIp = rateLimit.resetKey;

    return rateLimit;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
</body></html>